#!/usr/bin/python3

import sys
import json
import os
import subprocess
import time
import re
import shutil
import tempfile
import argparse
import logging

# If invoked with argument "--permissions", print following json and exit
#  {"permissions": {"dokuwiki.main": {"allowed": ["visitors", "all_users"]}, "dokuwiki.admin": {"allowed": ["user"]}}}

# print("Invoked with following args: %s" % sys.argv)

# command = [
#     "test/bin/yunohost",
#     "user",
#     "permission",
#     "list",
#     app_id,
#     "--output-as",
#     "json",
if (len(sys.argv) == 2 and sys.argv[1] == "user" and sys.argv[2] == "permission" and sys.argv[3] == "list"):
    print(json.dumps({"permissions": {"dokuwiki.main": {"allowed": [
        "visitors", "all_users"]}, "dokuwiki.admin": {"allowed": ["user"]}}}))
else:
    print(json.dumps({"label": "DokuWiki", "icon": "dokuwiki.png"}))
    # print("Invoked with following args: %s" % sys.argv)
sys.exit(0)

# /usr/local/bin/python3 /Users/hadrien/git/ansible-yunohost-modules/ynh_app.py '{"ANSIBLE_MODULE_ARGS": {"name":"patate"}}'
